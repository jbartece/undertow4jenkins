%=========================================================================
%Jakub Bartecek (xbarte09)
%Date: 2013 - 2014
%Encoding: UTF-8
%set syntax=tex




\chapter{Úvod}
    Tento semestrální projekt se zabývá vylepšením serveru Jenkins CI, který je v praxi velmi využíván pro potřeby průběžného testování softwaru
    a jeho kontinuální integraci. Vylepšení se týká především webového serveru a \emph{servlet} kontejneru, který je v Jenkins CI integrován. 
    V současném stavu tyto funkce vykonává kombinace nástrojů Winstone a Jetty. 
    
    Server Winstone je již neudržovaný a zastaralý nástroj a z tohoto důvodu
    byl z velké části nahrazen serverem Jetty, který potřebnou funkcionalitu poskytuje. Server Jetty je poměrně komplexní projekt a nabízí
    mnoho funkcionality, ale na druhou stranu jeho rozsah nedovoluje poskytovat maximální rychlost.
    
    V současné době vznikl nový webový server Undertow, který si klade za cíl být co nejjednodušší a nejrychlejší a mohl by být přínosný
    a vhodný pro Jenkins CI. Jelikož tento server je nový a je sponzorován firmou Red Hat, tak lze předpokládat, že jeho vývoj
    bude nadále pokračovat a nebude zastarávat.

    Cílem této práce je nahradit server Jetty a případně i serveu Winstone pomocí serveru Undertow 
    a integrovat jej se serverem Jenkins CI. Při integraci je kladen důraz na snahu
    zachovat zpětnou kompatibilitu se starým řešením. 

    V rámci tohoto semestrálního projektu jsou nejprve rozebrány potřebné informace týkající se jednotlivých nástrojů a plánované integrace.
    Následně je detailně analyzována architektura Jenkins CI a způsob jeho integrace se servery Winstone a Jetty. V následující části
    je diskutována varianta nahrazení pouze serveru Jetty a varianta nahrazení serveru Jetty i Winstone pomocí serveru Undertow. 
    Z provedené analýzy je zvolena jedna varianta, která je vybrána pro následnou integraci.

    Samotná implementace integrace není předmětem tohoto semestrálního projektu a bude provedena až v navazujícím diplomovém projektu. 
    V rámci dimplomového projektu bude také provedeno testování výkonu modifikovaného systému Jenkins CI a celkové shodnocení navržených
    a provedených změn.
%TODO - že to dělám pod Red Hatem


\chapter{Jenkins CI a související nástroje}
    Tato kapitola se zaměřuje na teoretické základy práce, které je nutné nebo vhodné znát pro pochopení zpracovávané problematiky.
    Je zde detailněji popsán systém Jenkins CI (kapitola \ref{jenkins}) ke kterému se tato práce přímo váže. S ním je spojeno seznámení
    s webovými servery Winstone (kapitola \ref{winstone}) a Jetty (kapitola \ref{jetty}), jejichž kombinace je současně v Jenkins CI integrována.
    Pro tuto práci je důležité poruzumět rozdílu mezí \emph{servlet kontejnerem} a webovým server. Vysvětlením těchto pojmů se zabývá kapitola \ref{servletWebserver}.

    Větší důraz je dále věnován serveru Undertow (kapitola \ref{undertow}), který byl vybrán jako nový webový server pro Jenkins CI. V tomto případě je provedena hlubší studie
    tohoto nástroje, aby na jejím základě bylo možné pochopit a provést samotnou integraci s Jenkins CI, která je jádrem této práce. 
    Pro poskytnutí ucelených informací
    je menší prostor také vymezen pro nástroj Maven (kapitola \ref{maven}), který se používá k řízení překladu serveru Jenkins CI, a je v této práci několikrát zmiňován. 

    Uvedené informace mají spíše informativní charakter, aby poskytly ucelený úvod do zkoumané problematiky. Jsou zaměřeny především na informace týkající se samotné
    integrace. Pro případné získání detailnějších informací jsou uvedeny patřičné zdroje, kde je lze hledat.

    \section {Jenkins CI} \label{jenkins}
        Jenkins CI je open source nástroj pro kontinuální integraci softwaru.
        Je velmi populární a využíván malými i velkými firmami jako je například firma Red Hat, kde tento program běží na stovkách serverů.

        Informace v této kapitole byly čerpány z knihy \cite{jenkinsBook}, kde lze nalézt další informace o serveru Jenkins CI,
        a také z webové stránky projektu \cite{jenkinsWeb}.

        \subsection{Kontinuální integrace a využití Jenkins CI}
            V minulosti byla integrace programu do výsledného produktu velmi náročným procesem a často ztraceným časem.
            S vydáním každé verze programu se musel postup probíhající před vydáním produktu opakovat a pro vývojářský tým
            to prakticky znamenalo zdržení se. Pokud se v tomto procesu odhalil nějaký problém, což bylo běžné, 
            tak jeho řešení bylo z důvodu nedostatku času a jeho pozdního objevení mnohem problematičtější,
            než kdyby byl tento problém odhalen dříve.

            Kontinuální integrace je moderní přístup k vývoji softwaru, který mění způsob myšlení nad celým procesem vývoje
            a snaží se předcházet problémům popsaným výše a především ušetřit čas. V tomto přístupu je využíván nějaký
            kvalitní nástroj, který automatizovaně provádí specifikované kroky, které provázejí integraci softwaru a jeho vydání.

            Jedním z nástrojů poskytujích podporu pro kontinuální integraci při vývoji softwaru je 
            server Jenkins CI. 
            
            \medskip \noindent Základními možnostmi, které umožňuje Jenkins CI nakonfigurovat, jsou:
            
            \begin{itemize}
                \item Spouštění integračních a jednotkových testů v přesně definovaném čase (např. v noci, kdy jsou servery méně vytížené)
                \item Spuštění integračních a jednotkových testů při změně ve verzovacím systému. Jenkins CI dokáže zaznamenat změnu v repozitáři,
                    stáhnout si změny a spustit testování
                \item Shromažďování a vyhodnocování metrik vývoje softwaru
                \item Spuštění akceptačních testů
                \item Informování e-mailem o testech, které skončily chybou
                \item Automatické nahrání nové verze produktu na server
            \end{itemize} 

            Uživatelé mohou kdykoliv přidat využití libovolné funkcionality systému a tudíž neopakovat stále stejné kroky. 
            

        \subsection{Způsob použití}
            Celý program je napsán v jazyce Java a je tedy plně přenositelný mezi platformami. Architektura je navržena tak, aby byla 
            lehce rozšiřitelná pomocí tzv. \emph{pluginů}, kterých je pro Jenkins vytvořené velké množství. 
            
            Jenkins CI je určen pro běh na serveru a je dostupný přes webové rozhraní (ale může být samozřejmě spuštěn
            na libovolném osobním počátači). Komunikuje pomocí protokolu \emph{HTTP}, 
            který je založen na modelu \emph{request-response} (česky požadavek-odpověď). Jelikož tento způsob komunikace
            je velmi, tak není v programu přímo implementován, ale využívá k němu externí nástroje. 
            Další důležitou činností, kterou Jenkins CI deleguje na jiné nástroje, je práce \emph{servlet kontejneru}. 
            Tento pojem je blíže objasněn v kapitole \ref{servletWebserver}.

            \medskip \noindent
            Existují dvě možnosti jak spustit server Jenkins CI:

            \begin{enumerate}
                \item{Může běžet na libovolném \emph{Java EE} aplikačním serveru \cite{jenkinsServers} jako jsou například servery 
                JBoss\footnote{Více informací o serveru viz http://www.jboss.org/jbossas/} 
                anebo Glasfish\footnote{Více informací o serveru viz http://www.oracle.com/technetwork/middleware/glassfish/}}.
                Jenkins CI se standardně nasadí na server (dle zvyklostí konkrétního serveru)
                a poté je s ním možné pracovat. V tomto případě veškerou nízkoúrovňovou komunikaci pomocí \emph{HTTP} 
                i práci servlet kontejneru zajišťuje aplikační server.
                
                \item{Pokud nechceme nebo nemůžeme spouštět Jenkins CI na aplikačním serveru, tak jej lze spustit přímo
                    z vytvořené \texttt{.war} archivu (překladem se zabývá kapitola \ref{jenkinsUsage}). V tomto případě
                    se o práci servlet kontejneru i webového serveru komunikujícího protokolem \emph{HTTP} stará 
                    kombinace nástrojů Winstone a Jetty, které jsou přímo integrovány do serveru Jenkins CI. 
                    
                    Nahrazení těchto dvou nástrojů (nebo pouze serveru Jetty) a zajištění vykonávání této činnosti je hlavním cílem této práce.
                    Záměrem je tedy nahradit server Jetty a případně i server Winstone pomocí zvoleného nového serveru Undertow.
                    Studie těchto nástrojů a jejich rozbor je předmětem následujícíh kapitol.}
            \end{enumerate}


        \subsection{Možnosti použití} \label{jenkinsUsage}
            WAR archiv
            Typy spouštění a překlady, spouštění testů

    \section{Servlet kontejner a webový server} \label{servletWebserver}
        Co je servlet kontejner a webserver? \cite{webserverVsServletPage}
         
    \section{Maven} \label{maven}
        Základní obecné informace, něco o pomkách - co tam najdeme, způsobech překladů
        \cite{mavenWeb}

    \section{Winstone} \label{winstone}
        Aspoň základní informace, aby následující kapitola byla lehčeji pochopitelná?
        \cite{winstoneWeb}

    \section{Jetty} \label{jetty}
        \cite{jettyWeb}
        obecné seznámení, co to umí

    \section{Undertow} \label{undertow}
        Obecné informace, k čemu je dobrý, srovnání s Jetty, odkazy na výsledky testování výkonu

        Jak se používá, jak se s ním pracuje a programuje, detailněji
        \cite{undertowWeb}

        


\chapter{Analýza problému}
    
    \section{Aktuální stav architektury webového serveru v Jenkins}
        Popis aktuálního stavu architektury Jenkins z pohledu servlet kontejneru, napojení Winstone a Jetty v Jenkins
        extras-executeblas-war, vkládání winstonu jako .jar

    \section{Zjištěné problémy}
        Rozdílná verze Javy - Undertow v. 7, Jenkins v. 6
        
        
    \section{Varianta ponechání Winstonu}

    \section{Varianta nahrazení Jetty i Winstonu}

    \section{Zvolená varianta}
        Způsob vyhodnocení správnosti výsledného řešení pomocí testů jenkins



\chapter{Závěr}


%=========================================================================



